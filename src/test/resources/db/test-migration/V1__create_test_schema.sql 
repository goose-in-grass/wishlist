-- === Таблица пользователей для тестовой БД ===
CREATE TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  created_at TIMESTAMP,
  updated_at TIMESTAMP,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  username VARCHAR(50) NOT NULL,
  CONSTRAINT users_pkey PRIMARY KEY (id),
  CONSTRAINT uk_email UNIQUE (email),
  CONSTRAINT uk_username UNIQUE (username)
);

-- === Таблица предметов для тестовой БД ===
CREATE TABLE IF NOT EXISTS items (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  created_at TIMESTAMP,
  updated_at TIMESTAMP,
  title VARCHAR(50) NOT NULL,
  description VARCHAR(100) NOT NULL,
  user_id BIGINT,
  CONSTRAINT items_pkey PRIMARY KEY (id),
  CONSTRAINT uk_title UNIQUE (title),
  CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users (id)
);

-- === Flyway индексы оставляем как есть ===
-- CREATE INDEX flyway_schema_history_s_idx ON flyway_schema_history(success);
-- Flyway сам создаёт этот индекс при инициализации
